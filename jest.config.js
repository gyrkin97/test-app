module.exports = {
  // --- Существующие настройки (они корректны) ---
  testEnvironment: 'node',
  verbose: true,

  // --- РЕКОМЕНДУЕМЫЕ УЛУЧШЕНИЯ ---

  /**
   * Автоматически сбрасывать все моки перед каждым тестом.
   * Это лучшая практика для изоляции тестов друг от друга.
   */
  clearMocks: true,

  /**
   * Указывает Jest, из каких файлов собирать информацию о покрытии.
   * Это гарантирует, что в отчет попадут все ваши сервисы и роуты,
   * даже те, для которых вы еще не написали тесты.
   */
  collectCoverageFrom: [
    'server/**/*.js', // Включить все .js файлы внутри папки server
    '!server/**/*.test.js', // Исключить сами тестовые файлы
    '!server/server.js', // Исключить главный файл сервера (его сложно тестировать юнитами)
    '!server/knexfile.js', // Исключить файлы конфигурации
    '!server/migrations/**', // Исключить миграции
    '!server/utils/**', // Исключить утилиты (если они простые)
  ],
};